<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>iPhone 17 Pro Max</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <style>
        /* ensure the preview image has a smooth opacity transition */
        #iphone-image {
            transition: opacity 300ms ease;
            opacity: 1;
            display: block;
            margin-left: auto;
            margin-right: auto;
            max-height: 400px;
            width: auto;
            object-fit: contain;
        }

        .btn-outline-warning.disabled {
            pointer-events: none;
            opacity: .6;
        }
    </style>
</head>
<body>

    <section class="hero text-center">
        <div class="container">
            <h1>iPhone 17 Pro Max</h1>
            <p class="tag">Innovation meets elegance — experience the future in your hands.</p>
        </div>
    </section>

    <section class="gallery container text-center">
        <div class="card p-4">
            <img id="iphone-image" src="images/iphone-multi.png" alt="iPhone 17 Pro Max" class="img-fluid rounded mb-3">

            <div class="d-flex justify-content-center gap-3">
                <button id="btn-orange" class="btn btn-outline-warning" data-src="images/iphone-orange.png">Orange</button>
                <button id="btn-blue" class="btn btn-outline-warning" data-src="images/iphone-blue.png">Blue</button>
                <button id="btn-silver" class="btn btn-outline-warning" data-src="images/iphone-silver.png">Silver</button>
            </div>
        </div>
    </section>

    <section class="container mt-5">
        <div class="features card p-4">
            <h2 class="mb-3">Product Overview</h2>
            <p style="color: #dcdcdc;">
                The iPhone 17 Pro Max brings revolutionary technology and precision design to the palm of your hand.
                Featuring the next-generation A19 Bionic chip, all-day battery life, and a pro-grade camera system —
                every moment becomes cinematic.
            </p>
        </div>

        <div class="features card p-4">
            <h2 class="mb-3">Key Features</h2>
            <ul>
                <li>6.9” Super Retina XDR Display with adaptive 120Hz refresh rate</li>
                <li>A19 Bionic Chip — power, efficiency, and speed combined</li>
                <li>48MP triple camera system with Ultra-HD Night Mode</li>
                <li>Titanium frame — lighter and stronger than ever</li>
                <li>MagSafe 3.0 fast charging and USB-C compatibility</li>
            </ul>
        </div>

        <div class="cta card p-4 text-center mt-4">
            <h3 class="mb-3" style="color: #f3f3f3;">Experience the Future</h3>
            <p style="color: #e0e0e0;">Available in Orange, Blue, and Silver — built for those who demand the extraordinary.</p>
        </div>
    </section>

    <footer>
        <p>© 2025 iPhone 17 Pro Max Showcase | Designed by Edgar Balahadia</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        (function () {
            const image = document.getElementById('iphone-image');
            const buttons = Array.from(document.querySelectorAll('.btn-outline-warning'));
            const FADE_MS = 300; // must match CSS transition duration

            // preload images to avoid flicker
            const preload = src => {
                const i = new Image();
                i.src = src;
            };
            buttons.forEach(b => preload(b.dataset.src));

            let busy = false;

            function setButtonsDisabled(state) {
                buttons.forEach(btn => {
                    if (state) {
                        btn.classList.add('disabled');
                        btn.setAttribute('aria-disabled', 'true');
                    } else {
                        btn.classList.remove('disabled');
                        btn.removeAttribute('aria-disabled');
                    }
                });
            }

            function changeImageTo(src) {
                if (busy) return;
                if (!src) return;
                if (image.src.endsWith(src)) return; // already showing (note: some browsers include full origin in image.src)
                busy = true;
                setButtonsDisabled(true);

                // fade out
                image.style.opacity = 0;

                // after fade duration change src and fade in when loaded
                setTimeout(() => {
                    image.src = src;
                    image.onload = () => {
                        image.style.opacity = 1;
                        // wait fade-in to finish before unlocking
                        setTimeout(() => {
                            busy = false;
                            setButtonsDisabled(false);
                        }, FADE_MS);
                    };
                    // in case onload never fires (cached or error), ensure unlocking
                    setTimeout(() => {
                        if (busy) {
                            image.style.opacity = 1;
                            busy = false;
                            setButtonsDisabled(false);
                        }
                    }, FADE_MS + 800);
                }, FADE_MS);
            }

            buttons.forEach(btn => {
                btn.addEventListener('click', () => {
                    const src = btn.dataset.src;
                    changeImageTo(src);
                });
            });
        })();
    </script>
</body>
</html>
